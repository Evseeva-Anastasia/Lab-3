<!DOCTYPE html>
<html>
	<head>
		<title>Лабораторная работа №3 //Евсеева Анастасия</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style>
			@import url('https://fonts.googleapis.com/css2?family=M+PLUS+1p:wght@100&family=Play&display=swap');
		</style>
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
	</head>
	<body>
		<script>
			window.onload = function(){
				var input = document.getElementById('operation-row');
				var inputExt = document.getElementById('extended-operation-row');
				var firstOperand = 0;
				var secondOperand = 0;
				var symbol = "";
				input.addEventListener('keydown', function(event) {
					if ( event.keyCode == 46){
						if (input.value.length == 1){
							input.value = "00";
						}
						return;
					} else if (event.keyCode == 8){
						return;
					} else {
						if ((event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
							event.preventDefault();
						}
					}
					input.value = Number(input.value);
				});
				document.getElementById('cifra-9').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "9";
					input.value = inputCache;
				};
				document.getElementById('cifra-8').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "8";
					input.value = inputCache;
				};
				document.getElementById('cifra-7').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "7";
					input.value = inputCache;
				};
				document.getElementById('cifra-6').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "6";
					input.value = inputCache;
				};
				document.getElementById('cifra-5').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "5";
					input.value = inputCache;
				};
				document.getElementById('cifra-4').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "4";
					input.value = inputCache;
				};
				document.getElementById('cifra-3').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "3";
					input.value = inputCache;
				};
				document.getElementById('cifra-2').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "2";
					input.value = inputCache;
				};
				document.getElementById('cifra-1').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "1";
					input.value = inputCache;
				};
				document.getElementById('cifra-0').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "";
					}
					inputCache += "0";
					input.value = inputCache;
				};
				document.getElementById('cifra-000').onclick = function(){
					var inputCache = input.value;
					if (inputCache == "0") {
						inputCache = "0";
					} else {
						inputCache += "000";
					}
					input.value = inputCache;
				};
				document.getElementById('btn-clear').onclick = function(){
					input.value = "0";
					inputExt.innerText = "";
					firstOperand = 0;
					secondOperand = 0;
					symbol = "";
				};
				document.getElementById('btn-delenie').onclick = function(){
					if (symbol == "") {
						firstOperand = input.value;
					}
					symbol = "/";
					inputExt.innerText = firstOperand + " " + symbol + " ";
					input.value = "0";
				};
				document.getElementById('btn-umnozhenie').onclick = function(){
					if (symbol == "") {
						firstOperand = input.value;
					}
					symbol = "×";
					inputExt.innerText = firstOperand + " " + symbol + " ";
					input.value = "0";
				};
				document.getElementById('btn-minus').onclick = function(){
					if (symbol == "") {
						firstOperand = input.value;
					}
					symbol = "-";
					inputExt.innerText = firstOperand + " " + symbol + " ";
					input.value = "0";
				};
				document.getElementById('btn-plus').onclick = function(){
					if (symbol == "") {
						firstOperand = input.value;
					}
					symbol = "+";
					inputExt.innerText = firstOperand + " " + symbol + " ";
					input.value = "0";
				};
				document.getElementById('btn-ravno').onclick = function(){
					if (symbol == "") {
						firstOperand = input.value;
					} else {
						secondOperand = input.value;
						var result = 0;
						switch (symbol) {
							case "/":
								result = firstOperand / secondOperand;
								break;
							case "×":
								result = firstOperand * secondOperand;
								break;
							case "-":
								result = firstOperand - secondOperand;
								break;
							case "+":
								result = Number(firstOperand) + Number(secondOperand);
								break;
						}
						inputExt.innerText = firstOperand + " " + symbol + " " + secondOperand + " = ";
						if (result == "Infinity") {
							result = "∞";
						}
						input.value = ("" + result).slice(0, 11);
						firstOperand = 0;
						secondOperand = 0;
						symbol = "";
					}
				};
				document.getElementById('btn-deleteLast').onclick = function(){
					var inputCache = input.value;
					if (inputCache.length == 1) {
						inputCache = "0";
					} else {
						inputCache = inputCache.slice(0, inputCache.length-1);
					}
					input.value = inputCache;
				};
			}
		</script>
		
		<div class="calc-wrapper">
			<div class="calc-container">
				<div class="calc-panel">
					<div id="extended-operation-row"></div>
					<input id="operation-row" value="0">
				</div>
				<div class="calc-buttons">
					<div class="btn-row">
						<button class="operation-btn operation-2" id="btn-clear">C</button>
						<button class="operation-btn operation-2" id="btn-deleteLast"><i class="fas fa-backspace"></i></button>
					</div>
					<div class="btn-row">
						<button class="operation-btn" id="cifra-7">7</button>
						<button class="operation-btn" id="cifra-8">8</button>
						<button class="operation-btn" id="cifra-9">9</button>
						<button class="operation-btn" id="btn-delenie">/</button>
					</div>
					<div class="btn-row">
						<button class="operation-btn" id="cifra-4">4</button>
						<button class="operation-btn" id="cifra-5">5</button>
						<button class="operation-btn" id="cifra-6">6</button>
						<button class="operation-btn" id="btn-umnozhenie">×</button>
					</div>
					<div class="btn-row">
						<button class="operation-btn" id="cifra-1">1</button>
						<button class="operation-btn" id="cifra-2">2</button>
						<button class="operation-btn" id="cifra-3">3</button>
						<button class="operation-btn" id="btn-minus">-</button>
					</div>
					<div class="btn-row">
						<button class="operation-btn" id="cifra-000">000</button>
						<button class="operation-btn" id="cifra-0">0</button>
						<button class="operation-btn" id="btn-ravno">=</button>
						<button class="operation-btn" id="btn-plus">+</button>
					</div>
				</div>
			</div>
		</div>
		
		<style>
			#operation-row {
				width: 208px;
				direction: rtl;
				background-color: transparent;
				border: 0;
				font-family: 'Play', sans-serif;
				font-size: 30px;
				outline: none;
				caret-color: transparent;
			}
			.operation-btn.operation-2 {
				width: 104px;
				height: 30px;
				border-radius: 10px;
				margin-top: 5px;
			}
			.calc-wrapper {
				background-color: #fcfcfc;
				width: 242px;
				height: 350px;
				position: absolute;
				top: 0;
				bottom: 0;
				left: 0;
				right: 0;
				margin: auto;
				border: 1px solid #e3e3e3;
				border-radius: 10px;
			}
			
			.operation-btn {
				background-color: #fefefe;
				border-radius: 50%;
				width: 50px;
				height: 50px;
				margin-bottom: 5px;
				border: 1px solid #d7d7d7;
				font-family: 'Play', sans-serif;
				font-size: 19px;
				cursor: pointer;
				outline: none;
			}
			
			.operation-btn:hover {
				background-color: #d7d7d7;
			}
			
			.calc-container {
				padding: 15px;
			}
			
			body {
				background-color: #fff;
			}
			
			#extended-operation-row {
				height: 20px;
				text-align: right;
				font-family: 'Play', sans-serif;
				font-size: 17px;
				color: #0404045e;
			}
		</style>
	</body>
</html>